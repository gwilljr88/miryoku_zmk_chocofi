// Copyright 2021 Manna Harbour
// https://github.com/manna-harbour/miryoku

// 1. Miryoku Includes must be at the top
#include "../miryoku/custom_config.h" 
#include "../miryoku/mapping/42/corne.h"

/ {
    // 2. ZMK Studio RPC Overlays (Nodes)
    chosen {
        zmk,studio-rpc-endpoint = &studio_rpc_usb;
    };
    
    studio_rpc_usb: studio_rpc_usb {
        compatible = "zmk,studio-rpc-uart";
        status = "okay";
        label = "STUDIO_RPC_USB";
    };

    // 3. Keymap Node Definition
    keymap {
        compatible = "zmk,keymap";

        // This must be inside the keymap node
        #include "../miryoku/miryoku.dtsi"

        // 4. Custom/Reserved Layers (Explicitly labeled for robustness)
        extra1: extra1 { status = "reserved"; };
        extra2: extra2 { status = "reserved"; };
    };
};
